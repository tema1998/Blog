{% extends 'core/base.html' %}
{% load static %}

{% block title %} News {% endblock title %}

{% block sidebar %}
    {% include 'core/include/sidebar_users.html' %}
{% endblock sidebar %}

{% block content %}
<div class="space-y-5 flex-shrink-0 lg:w-7/12">
    {% for post in posts reversed %}
    <div class="bg-white shadow rounded-md  -mx-2 lg:mx-0">
        <!-- post header-->
        <div class="flex justify-between items-center px-4 py-3">
            <div class="flex flex-1 items-center space-x-4">
    <!--                                    <a href="#">-->
    <!--                                        <div class="bg-gradient-to-tr from-yellow-600 to-pink-600 p-0.5 rounded-full">  -->
    <!--                                            <img src="{{user_profile.profileimg.url}}" class="bg-gray-200 border border-white rounded-full w-8 h-8">-->
    <!--                                        </div>-->
    <!--                                    </a>-->
                <span class="block font-semibold "> <a href="/profile/{{post.user}}">@{{post.user}}</a> </span>
            </div>
          <div>
            <a href="#"> <i class="icon-feather-more-horizontal text-2xl hover:bg-gray-200 rounded-full p-2 transition -mr-1 "></i> </a>
            <div class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden text-base border border-gray-100  " uk-drop="mode: hover;pos: top-right">

                <ul class="space-y-1">
                  <li>
                      <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md ">
                       <i class="uil-share-alt mr-1"></i> Share
                      </a>
                  </li>
                  <li>
                      <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md ">
                       <i class="uil-edit-alt mr-1"></i>  Edit Post
                      </a>
                  </li>
                  <li>
                      <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md ">
                       <i class="uil-comment-slash mr-1"></i>   Disable comments
                      </a>
                  </li>
                  <li>
                      <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md ">
                       <i class="uil-favorite mr-1"></i>  Add favorites
                      </a>
                  </li>
                  <li>
                    <hr class="-mx-2 my-2 ">
                  </li>
                  <li>
                      <a href="#" class="flex items-center px-3 py-2 text-red-500 hover:bg-red-100 hover:text-red-500 rounded-md ">
                       <i class="uil-trash-alt mr-1"></i>  Delete
                      </a>
                  </li>
                </ul>

            </div>
          </div>
        </div>




        <div class="py-3 px-4 space-y-3">
            <div class="myfirst1">
                <a href="{{post.image.url}}">
                    <img src="{{post.image.url}}" alt="" align="center">
                </a>
            </div>


            <div class="flex space-x-4 lg:font-bold">

                <a href="/like-post?post_id={{post.id}}" class="flex items-center space-x-2">
                    <div class="p-2 rounded-full text-black">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="25" height="25" class="">
                            <path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />
                        </svg>
                        {% if post.no_of_likes == 0 %}
                        <p>No likes</p>
                        {% elif post.no_of_likes == 1 %}
                        <p>Liked by {{post.no_of_likes}} person</p>
                        {% else %}
                        <p>Liked by {{post.no_of_likes}} people</p>
                        {% endif %}
                    </div>

                </a>
    <!--                                    <a href="#" class="flex items-center space-x-2">-->
    <!--                                        <div class="p-2 rounded-full text-black">-->
    <!--                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="25" height="25" class="">-->
    <!--                                                <path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd" />-->
    <!--                                            </svg>-->
    <!--                                        </div>-->

                </a>
                <a href="{{post.image.url}}" class="flex items-center space-x-2 flex-1 justify-end" downLoad>
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="25" height="25" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><g fill="currentColor"><path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v6h-2a.5.5 0 0 0-.354.854l2.5 2.5a.5.5 0 0 0 .708 0l2.5-2.5A.5.5 0 0 0 10.5 7.5h-2v-6z"/></g></svg>

                </a>
            </div>
    <!--                                <div class="flex items-center space-x-3"> -->
    <!--                                    <div class="flex items-center">-->
    <!--                                        <img src="{% static 'assets/images/avatars/avatar-1.jpg' %}" alt="" class="w-6 h-6 rounded-full border-2 border-white ">-->
    <!--                                        <img src="{% static 'assets/images/avatars/avatar-4.jpg' %}" alt="" class="w-6 h-6 rounded-full border-2 border-white  -ml-2">-->
    <!--                                        <img src="{% static 'assets/images/avatars/avatar-2.jpg' %}" alt="" class="w-6 h-6 rounded-full border-2 border-white  -ml-2">-->
    <!--                                    </div>-->
    <!--                                    <div class="">-->
    <!--                                        Liked <strong> taiye</strong> and <strong> 209 Others </strong>-->
    <!--                                    </div>-->
    <!--                                </div>-->

            <p>
                <a href="/profile/{{post.user}}"><strong> {{post.user}} </strong> </a> {{post.caption}}
            </p>

            <div class="border-t pt-4 space-y-4 ">

                {% for comment in post.get_comments %}
                    <div class="flex">
                        <div class="w-10 h-10 rounded-full relative flex-shrink-0">
                            <a href ='/profile/{{ comment.user }}'><img src="{{ comment.user_photo }}" alt="" class="absolute h-full rounded-full w-full"></a>
                        </div>
                        <div class="text-gray-700 py-2 px-3 rounded-md bg-gray-100 h-full relative lg:ml-5 ml-2 lg:mr-20 container ">
                            <a href ='/profile/{{ comment.user }}'><b>{{ comment.user }}:</b></a>
                            <p class="leading-6">{{comment.text}}
                                <a href = "/like-comment?comment_id={{comment.id}}" class ="flex items-center space-x-2" >
    <!--                                                        <ursna class="i uil-heart"></urna>-->

                                    <img src="{% static 'images/no_like.jpg' %}" height="5%" width="5%">
                                    {{comment.no_of_likes}}
                                </a>
    <!--                                                    <i class="uil-grin-tongue-wink"> </i>-->
                            </p>
                            <div class="absolute w-3 h-3 top-3 -left-1 bg-gray-100 transform rotate-45 "></div>
                        </div>
                    </div>
                {% endfor %}

            </div>

            <form action="/" method="POST">
                {% csrf_token %}
                <input type="hidden" value="{{user.id}}" name="user_id">
                <input type="hidden" value="{{post.id}}" name="post_id">

                <div class="bg-gray-100 bg-gray-100 rounded-full rounded-md relative ">
                    <input type="text" placeholder="post a comment" class="bg-transparent max-h-10 shadow-none" name="text">
                    <div class="absolute bottom-0 flex h-full items-center right-0 right-3 text-xl space-x-2">
                    </div>
                </div>
            </form>

        </div>

    </div>
    {% endfor %}
</div>
{% endblock content %}
